# Sprint Runner

AI-driven sprint automation using Claude CLI. State a goal, generate a PRD and task list, then let Claude build it task-by-task.

## Quick Start

```bash
# 1. Create a new sprint
./scripts/sprint_new.sh v2 "Add Uniswap V3 adapter with real pool data"

# 2. Edit the goal file (refine acceptance criteria, constraints, etc.)
#    vi sprints/v2/00-goal.md

# 3. Generate PRD and task checklist from the goal
./scripts/sprint_prd.sh v2

# 4. Review the generated PRD and tasks
#    vi sprints/v2/01-prd.md
#    vi sprints/v2/02-tasks.md

# 5. Run all tasks automatically
./scripts/sprint_dev.sh v2 --loop
```

## Scripts

### `sprint_new.sh` — Create a sprint

```bash
./scripts/sprint_new.sh <name> "goal description"
```

Creates `sprints/<name>/` with:

- `00-goal.md` — Goal template to fill in
- `01-prd.md` — Placeholder (generated by sprint_prd)
- `02-tasks.md` — Placeholder (generated by sprint_prd)
- `03-status.md` — Status log

### `sprint_prd.sh` — Generate PRD + tasks

```bash
./scripts/sprint_prd.sh <name> [--model sonnet] [--max-budget-usd 2.00]
```

Reads `00-goal.md` and generates a PRD and checklist of tasks.

### `sprint_dev.sh` — Execute tasks

```bash
./scripts/sprint_dev.sh <name> [--loop] [--dry-run] [--model sonnet] [--max-budget-usd 5.00]
```

| Flag               | Description                             |
| ------------------ | --------------------------------------- |
| `--loop`           | Process all remaining tasks in sequence |
| `--dry-run`        | Show the next task without executing    |
| `--model`          | Claude model to use (default: `sonnet`) |
| `--max-budget-usd` | Per-task spending cap (default: `5.00`) |

Each task runs through: Claude edits files → lint → test → commit. If lint or tests fail, changes are reverted and the failure is logged.

## Sprint Directory Structure

```
sprints/
├── README.md          ← you are here
├── v1/
│   ├── 00-goal.md     ← what you want to build
│   ├── 01-prd.md      ← generated PRD
│   ├── 02-tasks.md    ← generated task checklist
│   └── 03-status.md   ← execution log
└── v2/
    └── ...
```

## Tips

- **Be specific in `00-goal.md`** — the more concrete your acceptance criteria, the better the generated tasks
- **Review `02-tasks.md` before running dev** — reorder, add, or remove tasks as needed
- **Use `--dry-run` first** to see what task would execute next
- **Use `--max-budget-usd`** to cap spending on complex tasks
